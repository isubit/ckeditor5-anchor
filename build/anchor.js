!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CKEditor5=e():(t.CKEditor5=t.CKEditor5||{},t.CKEditor5.anchor=e())}(self,(()=>(()=>{var t={704:(t,e,s)=>{t.exports=s(79)("./src/core.js")},492:(t,e,s)=>{t.exports=s(79)("./src/engine.js")},273:(t,e,s)=>{t.exports=s(79)("./src/ui.js")},209:(t,e,s)=>{t.exports=s(79)("./src/utils.js")},995:(t,e,s)=>{t.exports=s(79)("./src/widget.js")},79:t=>{"use strict";t.exports=CKEditor5.dll}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,s),o.exports}s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};return(()=>{"use strict";s.d(i,{default:()=>f});var t=s(704),e=s(995);class n extends t.Plugin{static get requires(){return[e.Widget]}init(){const{editor:t}=this,{conversion:s}=t;t.model.schema.register(u,{allowWhere:"$text",isInline:!0,isObject:!0,allowAttributes:["id"]}),s.for("upcast").elementToElement({view:{name:"a",attributes:{id:!0}},model:(t,{writer:e})=>e.createElement(u,{id:t.getAttribute("id")})}),s.for("editingDowncast").elementToElement({model:u,view:(t,{writer:s})=>(0,e.toWidget)(s.createContainerElement("span",{class:"image-inline anchor"}),s,{label:u})}),s.for("dataDowncast").elementToElement({model:u,view:(t,{writer:e})=>e.createEmptyElement("a",{id:t.getAttribute("id")})})}}var o=s(492),r=s(273);class c extends r.View{constructor(e,s,i=!0){super(e);const n=[s];if(i){const e=this.i("Save",t.icons.check,"ck-button-save");e.type="submit",n.push(e)}const o=this.i("Cancel",t.icons.cancel,"ck-button-cancel");o.delegate("execute").to(this,"cancel"),n.push(o);const r=this.createCollection(n);this.l=r,this.setTemplate({tag:"form",attributes:{class:["ck","ck-abbr-form"],tabindex:"-1"},children:r})}h(){this.l.first.focus()}u(){}render(){super.render(),(0,r.submitHandler)({view:this})}i(t,e,s){const i=new r.ButtonView;return i.set({label:t,icon:e,tooltip:!0,class:s}),i}}class a extends c{constructor(t){const e=new r.LabeledFieldView(t,r.createLabeledInputText);e.label=t.t(w),super(t,e),this.m=e}u(){this.m.fieldView.value=""}}var l=s(209);class h extends c{constructor(t){const e=new r.LabeledFieldView(t,r.createLabeledDropdown);e.label=t.t(w);const{fieldView:s}=e;s.buttonView.withText=!0,s.on("execute",(t=>{this.p=t.source.element.textContent})),super(t,e,!1),this.v=s}g(t){this.v.panelView.children.clear();const e=new l.Collection;for(const s of t)e.add({type:"button",model:new r.Model({withText:!0,label:s,type:"submit"})});(0,r.addListToDropdown)(this.v,e)}}class d extends t.Plugin{static get requires(){return[r.ContextualBalloon]}init(){const{editor:t}=this,{model:e,t:s}=t,{selection:i}=e.document;t.editing.view.addObserver(o.ClickObserver);const n=t.plugins.get(r.ContextualBalloon),c=new a(t.locale),l=new h(t.locale);this._=n,this.j=c,this.k=l;const d="submit",w="cancel",m="execute";c.on(d,(()=>{e.change((t=>{const s=c.m.fieldView.element.value;s&&(e.insertContent(t.createElement(u,{id:s}),i.getFirstPosition()),this.C.isVisible=!0),this.A(c)}))})),c.on(w,(()=>this.A(c))),l.on(d,(()=>{e.change((e=>{l.p&&t.execute("link","#"+l.p),l.p=void 0,this.A(l)}))})),l.on(w,(()=>this.A(l)));for(const t of[c,l])(0,r.clickOutsideHandler)({emitter:t,activator:()=>n.visibleView==t,contextElements:[n.view.element],callback:()=>this.A(t)});const{componentFactory:f}=t.ui;f.add(u,(()=>{const t=new r.ButtonView;return t.set({label:s("Anchor"),icon:'<svg height="20" width="20" viewBox="-5 -5 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M5 3l2 0l0 28l-2 0z"/><path d="M8 4C8,3 15,0 19,3C22,5 26,3 29,3L29 17C29,21 21,19 19,18C17,17 12,16 8,18z"/></svg>',tooltip:!0}),t.on(m,(()=>this.I(i.getSelectedElement()))),t})),f.add(u+"_link",(()=>{const t=new r.ButtonView;return t.set({label:s("Anchor Link"),icon:'<svg height="20" width="20" viewBox="-6 -6 25 25" xmlns="http://www.w3.org/2000/svg"><path d="M-1.5 -2.5l1 0l0 14l-1 0z"/><path d="M0 -2C0,-2.5 3.5,-4 5.5,-2.5C7,-1.5 9,-2.5 10.5,-2.5L10.5 4.5C10.5,6.5 6.5,5.5 5.5,5C4.5,4.5 2,4 0,5z"/><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',tooltip:!0,isVisible:!1}),t.on(m,(()=>this.L())),this.C=t,t})),t.once("ready",(()=>{this.M(!0)&&(this.C.isVisible=!0)})),t.editing.view.document.on("click",(()=>{const t=i.getSelectedElement();t&&this.I(t)}))}M(t=!1){const{model:e}=this.editor,s=[],i=e.createRangeIn(e.document.getRoot());for(const e of i.getWalker({ignoreElementEnd:!0}))if(e.item.is("element",u)){if(t)return!0;s.push(e.item.getAttribute("id"))}return!t&&s}U(t){const{editor:e}=this,{view:s}=e.editing,i={target:()=>s.domConverter.viewRangeToDom(s.document.selection.getFirstRange())};this._.add({view:t,position:i}),t.h()}I(t=void 0){const{j:e}=this;if(t){if(!t.is("element",u))return;e.m.fieldView.value=t.getAttribute("id")}this.U(e)}L(){this.k.g(this.M()),this.U(this.k)}A(t){t.u(),t.element.reset(),this._.remove(t),this.editor.editing.view.focus()}}const u="anchor",w="Anchor ID";class m extends t.Plugin{static get requires(){return[n,d]}static get pluginName(){return"Anchor"}}const f={Anchor:m}})(),i=i.default})()));